<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DataTable - Fixed Height & Actions Demo</title>
    <link rel="stylesheet" href="../styles/base.css" />
    <link rel="stylesheet" href="../styles/ui/data_table.css" />
    <style>
      body {
        padding: 20px;
        max-width: 1400px;
        margin: 0 auto;
      }
      h1 {
        margin-bottom: 30px;
      }
      .demo-section {
        margin-bottom: 50px;
      }
      .demo-section h2 {
        margin-bottom: 15px;
        color: var(--text-primary);
      }
      .demo-section p {
        color: var(--text-secondary);
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <h1>üé® DataTable: Fixed Height & Actions Demo</h1>

    <!-- Demo 1: Fixed Height with Multiple Buttons -->
    <div class="demo-section">
      <h2>1. Fixed Height Table with Multiple Action Buttons</h2>
      <p>Table height: 400px, with Edit and Delete buttons</p>
      <div id="table-buttons"></div>
    </div>

    <!-- Demo 2: Dropdown Menu Actions -->
    <div class="demo-section">
      <h2>2. Fixed Height Table with Dropdown Menu</h2>
      <p>Table height: 600px, with three-dot dropdown menu</p>
      <div id="table-dropdown"></div>
    </div>

    <!-- Demo 3: Text Wrapping -->
    <div class="demo-section">
      <h2>3. Text Wrapping Example</h2>
      <p>Table height: 500px, with wrapped description column</p>
      <div id="table-wrapping"></div>
    </div>

    <script type="module">
      import { DataTable } from "../scripts/ui/data_table.js";

      // Sample data generator
      function generateSampleData(count) {
        const statuses = ["Active", "Inactive", "Pending", "Error"];
        const services = [
          "auth_service",
          "api_gateway",
          "database",
          "cache",
          "queue",
          "worker",
        ];
        const descriptions = [
          "Handles user authentication and authorization with JWT tokens",
          "Main entry point for all API requests, includes rate limiting and request routing",
          "PostgreSQL database connection pool manager",
          "Redis cache layer for high-performance data access",
          "Message queue processor for background jobs",
          "Worker threads handling async operations",
        ];

        return Array.from({ length: count }, (_, i) => ({
          id: i + 1,
          name:
            services[i % services.length] +
            `_${Math.floor(i / services.length) + 1}`,
          status: statuses[i % statuses.length],
          description: descriptions[i % descriptions.length],
          uptime: Math.floor(Math.random() * 100) + 1,
          requests: Math.floor(Math.random() * 10000),
        }));
      }

      const sampleData = generateSampleData(20);

      // Demo 1: Multiple Action Buttons
      const table1 = new DataTable({
        container: "#table-buttons",
        fixedHeight: "sm", // 400px
        columns: [
          {
            id: "name",
            label: "Service",
            sortable: true,
            width: 180,
          },
          {
            id: "status",
            label: "Status",
            sortable: true,
            width: 100,
            render: (val) => {
              const colors = {
                Active: "#10b981",
                Inactive: "#6b7280",
                Pending: "#f59e0b",
                Error: "#ef4444",
              };
              return `<span style="color: ${colors[val]}; font-weight: 600;">‚óè ${val}</span>`;
            },
          },
          {
            id: "uptime",
            label: "Uptime %",
            sortable: true,
            width: 100,
            render: (val) => `${val}%`,
          },
          {
            id: "requests",
            label: "Requests",
            sortable: true,
            width: 100,
          },
          {
            id: "actions",
            label: "Actions",
            type: "actions",
            actions: {
              buttons: [
                {
                  id: "edit",
                  label: "Edit",
                  icon: "‚úèÔ∏è",
                  variant: "primary",
                  onClick: (row) => {
                    alert(`Edit service: ${row.name}`);
                  },
                },
                {
                  id: "delete",
                  icon: "üóëÔ∏è",
                  variant: "danger",
                  size: "sm",
                  tooltip: "Delete service",
                  onClick: (row) => {
                    if (confirm(`Delete ${row.name}?`)) {
                      alert(`Deleted: ${row.name}`);
                    }
                  },
                },
              ],
            },
          },
        ],
        toolbar: {
          search: { enabled: true, placeholder: "Search services..." },
        },
        stickyHeader: true,
        zebra: true,
      });
      table1.setData(sampleData);

      // Demo 2: Dropdown Menu
      const table2 = new DataTable({
        container: "#table-dropdown",
        fixedHeight: "md", // 600px
        columns: [
          {
            id: "name",
            label: "Service",
            sortable: true,
            width: 180,
          },
          {
            id: "status",
            label: "Status",
            sortable: true,
            width: 100,
            render: (val) => {
              const colors = {
                Active: "#10b981",
                Inactive: "#6b7280",
                Pending: "#f59e0b",
                Error: "#ef4444",
              };
              return `<span style="color: ${colors[val]}; font-weight: 600;">‚óè ${val}</span>`;
            },
          },
          {
            id: "uptime",
            label: "Uptime %",
            sortable: true,
            width: 100,
            render: (val) => `${val}%`,
          },
          {
            id: "actions",
            label: "Actions",
            type: "actions",
            actions: {
              dropdown: true,
              icon: "‚ãÆ",
              menuPosition: "left",
              items: [
                {
                  id: "start",
                  label: "Start Service",
                  icon: "‚ñ∂Ô∏è",
                  onClick: (row) => {
                    alert(`Starting: ${row.name}`);
                  },
                },
                {
                  id: "stop",
                  label: "Stop Service",
                  icon: "‚è∏Ô∏è",
                  onClick: (row) => {
                    alert(`Stopping: ${row.name}`);
                  },
                },
                { type: "divider" },
                {
                  id: "logs",
                  label: "View Logs",
                  icon: "üìã",
                  onClick: (row) => {
                    alert(`Viewing logs for: ${row.name}`);
                  },
                },
                {
                  id: "restart",
                  label: "Restart",
                  icon: "üîÑ",
                  variant: "danger",
                  onClick: (row) => {
                    if (confirm(`Restart ${row.name}?`)) {
                      alert(`Restarting: ${row.name}`);
                    }
                  },
                },
              ],
            },
          },
        ],
        toolbar: {
          search: { enabled: true, placeholder: "Search services..." },
        },
        stickyHeader: true,
        zebra: true,
      });
      table2.setData(sampleData);

      // Demo 3: Text Wrapping
      const table3 = new DataTable({
        container: "#table-wrapping",
        fixedHeight: 500, // Custom pixel value
        columns: [
          {
            id: "name",
            label: "Service",
            sortable: true,
            width: 150,
            wrap: false, // No wrapping, use ellipsis
          },
          {
            id: "description",
            label: "Description",
            wrap: true, // Enable text wrapping
            width: 400,
          },
          {
            id: "status",
            label: "Status",
            sortable: true,
            width: 100,
            wrap: false,
            render: (val) => {
              const colors = {
                Active: "#10b981",
                Inactive: "#6b7280",
                Pending: "#f59e0b",
                Error: "#ef4444",
              };
              return `<span style="color: ${colors[val]}; font-weight: 600;">‚óè ${val}</span>`;
            },
          },
          {
            id: "actions",
            label: "",
            type: "actions",
            actions: {
              buttons: [
                {
                  id: "view",
                  icon: "üëÅÔ∏è",
                  tooltip: "View details",
                  onClick: (row) => {
                    alert(`Viewing: ${row.name}`);
                  },
                },
              ],
            },
          },
        ],
        toolbar: {
          search: { enabled: true, placeholder: "Search..." },
        },
        stickyHeader: true,
        zebra: true,
      });
      table3.setData(sampleData);
    </script>
  </body>
</html>
